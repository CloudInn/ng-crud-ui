<!-- <mat-progress-bar *ngIf="isLoading" mode="query"></mat-progress-bar> -->

<mat-card *ngIf="is_ready">
    <!-- <div class="form-container"> -->
    <ng-container [ngSwitch]="model.form_type">
        <div *ngSwitchCase="'formset'">
            <div *ngFor="let ctrl of formset.controls">
                <mat-grid-list *ngSwitchDefault cols="4" rowHeight="2:1">
                    <mat-grid-tile *ngFor="let field of fields">
                        <ngcrudui-form-field [form]="ctrl" [field]="field"></ngcrudui-form-field>
                    </mat-grid-tile>
                </mat-grid-list>        
            </div>    
        </div>
        <mat-grid-list *ngSwitchDefault cols="4" rowHeight="2:1">
            <mat-grid-tile *ngFor="let field of fields" [colspan]="field.colspan || 1" [rowspan]="field.rowspan || 1">
                <ngcrudui-form-field  [form]="form" [field]="field"></ngcrudui-form-field>
            </mat-grid-tile>
        </mat-grid-list>
    </ng-container>


    <div *ngFor="let formarray of formsets; let i=index">
        <ngcrudui-formset  [model]="model" [config]="model.formsets[i]"  [formarray]="formarray" [form]="form"></ngcrudui-formset>        
    </div>

    <button mat-raised-button color="primary" (click)="_onSubmit()">
        <span *ngIf="mode === 'search'">Search</span>
        <span *ngIf="mode === 'create'">Create</span>
        <span *ngIf="mode === 'edit'">Update</span>
    </button>
</mat-card>