<div [ngSwitch]="type" class="form-field-wrapper" [formGroup]="formGroup">

    <div *ngSwitchCase="'switch'">
        <mat-slide-toggle matInput [formControlName]="config.name">{{ config.label }}</mat-slide-toggle>
    </div>

    <mat-form-field *ngSwitchCase="'textarea'">
        <mat-label>{{ config.label }}</mat-label>
        <textarea matInput matTextareaAutosize [formControlName]="config.name"
            [rows]="config.rowSpan || 1"></textarea>
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'select'">
        <mat-label>{{ config.label }}</mat-label>
        <mat-select [formControlName]="config.name">
            <mat-option></mat-option>
            <mat-option [value]="c.value" *ngFor="let c of choices">
                {{ c.label }}
            </mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'date'">
        <mat-label>{{ config.label }}</mat-label>
        <input  matInput [formControlName]="config.name"  [matDatepicker]="myDatepicker" />
        <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
        <mat-datepicker #myDatepicker></mat-datepicker>
    </mat-form-field>
    
    <ng-container *ngSwitchCase="'foreignKey'">
        <!-- <mat-form-field>
            <mat-label>{{ config.label }}</mat-label>
            <input type="text" matInput [formControlName]="config.name" [matAutocomplete]="auto">
        </mat-form-field>
        <button mat-icon-button (click)="openListingDialog()"><mat-icon>search</mat-icon></button>
        
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
            <mat-option *ngFor="let option of filteredOptions | async" [value]="option[foreign_model.externalValueField]">
                {{ option[foreign_model.externalNameField] }}
            </mat-option>
        </mat-autocomplete> -->
        <ng-crud-foreign-key-field [config]="config" [formGroup]="formGroup"></ng-crud-foreign-key-field>
    </ng-container>

    <!-- this fallsback from number and text -->
    <mat-form-field *ngSwitchDefault>
        <mat-label>{{ config.label }}</mat-label>
        <input  matInput [formControlName]="config.name"
                [type]="config.control ? config.control.type : 'text'" />
    </mat-form-field>

</div>